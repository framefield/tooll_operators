{
  "Name": "AddColorOverlay",
  "_id": "1600a635-c691-483b-a653-2964db906132",
  "Namespace": "lib.image.generate",
  "Description": "Adds different color gradient to an image.",
  "Inputs": [
    {
      "Name": "Code",
      "MetaInstanceID": "7030cc51-c58d-48c8-9ecc-61229eb793e9",
      "DefaultValue": {
        "Type": "Text",
        "Value": [
          "//>>> _common parameters\r",
          "float4x4 objectToWorldMatrix;",
          "float4x4 worldToCameraMatrix;",
          "float4x4 projMatrix;",
          "Texture2D txDiffuse;",
          "float2 RenderTargetSize;",
          "//<<< _common parameters\r",
          "\r",
          "//>>> _parameters\r",
          "Texture2D Image1;",
          "float4 ColorA;",
          "float2 PositionA;",
          "float4 ColorB;",
          "float2 PositionB;",
          "float4 ColorC;",
          "float2 PositionC;",
          "float4 ColorD;",
          "float2 PositionD;",
          "float Radius;",
          "float Bleed;",
          "float Randomize;",
          "float Seed;",
          "//<<< _parameters\r",
          "\r",
          "//>>> _setup\r",
          "SamplerState samLinear",
          "{",
          "    Filter = MIN_MAG_MIP_LINEAR;",
          "    AddressU = Clamp;",
          "    AddressV = Clamp;",
          "};",
          "//<<< _setup\r",
          "\r",
          "//>>> _declarations\r",
          "struct VS_IN",
          "{",
          "    float4 pos : POSITION;",
          "    float2 texCoord : TEXCOORD;",
          "};",
          "",
          "struct PS_IN",
          "{",
          "    float4 pos : SV_POSITION;",
          "    float2 texCoord: TEXCOORD0;",
          "};",
          "//<<< _declarations\r",
          "\r",
          "//>>> _GS\r",
          "",
          "//<<< _GS\r",
          "\r",
          "//>>> _VS \r",
          "PS_IN VS( VS_IN input )",
          "{",
          "    PS_IN output = (PS_IN)0;",
          "",
          "    output.pos = mul(input.pos, worldToCameraMatrix);",
          "    output.pos = mul(output.pos, projMatrix);",
          "    output.texCoord = input.texCoord;",
          "",
          "    return output;",
          "}",
          "//<<< _VS\r",
          "\r",
          "//>>> PS\r",
          "float fade(float d) {\r",
          "    d = clamp( 1-d / Radius, 0,1); \r",
          "    return d * d * d * (d * (d * 6 - 15) + 10);\r",
          "}\r",
          "\r",
          "float4 PS(PS_IN input) : SV_Target\r",
          "{\r",
          "    float aspectRatio = RenderTargetSize.x/RenderTargetSize.y;\r",
          "    float4 debug=float4(0,0,0,0);\r",
          "\r",
          "    float2 pA= input.pos/RenderTargetSize - float2(0.5,0.5) + 0.5*float2(-PositionA.x, PositionA.y);\r",
          "    pA.x *=  aspectRatio;        \r",
          "    float dA = fade(length(pA));\r",
          "    if(dA > 0.003 && dA % 0.25 < 0.004) {\r",
          "        debug.rgb = ColorA.rgb;\r",
          "        debug.a = 1;\r",
          "    }\r",
          "    \r",
          "    float2 pB= input.pos/RenderTargetSize - float2(0.5,0.5) + 0.5*float2(-PositionB.x, PositionB.y);\r",
          "    pB.x *=  aspectRatio;        \r",
          "    float dB = fade(length(pB));\r",
          "    if(dB > 0.003 && dB % 0.25 < 0.004) {\r",
          "        debug.rgb = ColorB.rgb;\r",
          "        debug.a = 1;\r",
          "    }\r",
          "    \r",
          "    float2 pC= input.pos/RenderTargetSize - float2(0.5,0.5) + 0.5*float2(-PositionC.x, PositionC.y);\r",
          "    pC.x *=  aspectRatio;        \r",
          "    float dC = fade(length(pC));\r",
          "    if(dC > 0.003 && dC % 0.25 < 0.004) {\r",
          "        debug.rgb = ColorC.rgb;\r",
          "        debug.a = 1;\r",
          "    }\r",
          "\r",
          "    float2 pD= input.pos/RenderTargetSize - float2(0.5,0.5) + 0.5*float2(-PositionD.x, PositionD.y);\r",
          "    pD.x *=  aspectRatio;        \r",
          "    float dD = fade(length(pD));\r",
          "    if(dD > 0.003 && dD % 0.25 < 0.004) {\r",
          "        debug.rgb = ColorD.rgb;\r",
          "        debug.a = 1;\r",
          "    }\r",
          "    \r",
          "    float4 c = (dA * ColorA + dB * ColorB + dC * ColorC + dD * ColorD) / (Bleed+dA + dB + dC + dD); \r",
          "/*\r",
          "    float2 pB= input.pos/RenderTargetSize - float2(0.5,0.5) + 0.5*float2(-PositionB.x, PositionB.y);\r",
          "    pB.x *=  aspectRatio;        \r",
          "    float dB = fade(length(pB));\r",
          "\r",
          "    float2 pC= input.pos/RenderTargetSize - float2(0.5,0.5) + 0.5*float2(-PositionC.x, PositionC.y);\r",
          "    pC.x *=  aspectRatio;        \r",
          "    float dC = fade(length(pC));\r",
          "\r",
          "    float2 pD= input.pos/RenderTargetSize - float2(0.5,0.5) + 0.5*float2(-PositionD.x, PositionD.y);\r",
          "    pD.x *=  aspectRatio;        \r",
          "    float dD = fade(length(pD));\r",
          "    \r",
          "    float4 c=float4(0,0,0,0);\r",
          "    if ((dA + dB + dC + dD) > 0) {\r",
          "        c= (dA * ColorA  + dB *ColorB + dC * ColorC + dD * ColorD) / (dA + dB + dC + dD);\r",
          "    }\r",
          "*/\r",
          "\r",
          "    float4 src= Image1.Sample(samLinear, input.texCoord); \r",
          "\r",
          "    /*\r",
          "    if( d < ColorRadius.x) {\r",
          "        c= lerp( ColorA, ColorB, d / ColorRadius.x);\r",
          "    }\r",
          "    else if( d < ColorRadius.y+ColorRadius.x) {\r",
          "        c= lerp( ColorB, ColorC, (d-ColorRadius.x) / (ColorRadius.y));\r",
          "    }\r",
          "    else if ( d < ColorRadius.y+ColorRadius.x+ColorRadius.z) {\r",
          "        c= lerp( ColorC, ColorD, (d-ColorRadius.x-ColorRadius.y) / (ColorRadius.z+0.0001));\r",
          "    }\r",
          "    else {\r",
          "        c= ColorD;\r",
          "    }*/\r",
          "    \r",
          "    /*\r",
          "    //float a = src.a + c.a - src.a * c.a;\r",
          "    float a=  src.a + c.a * (1 - src.a);\r",
          "    return float4(0, src.a,0,1);\r",
          "    //float3 rgb= (1.0 - c.a) * src.rgb + c.a * c.rgb;   \r",
          "    \r",
          "    float3 rgb =  (src.rgb * src.a + c.rgb * c.a * (1- src.a) ) / a;\r",
          "    */\r",
          "\r",
          "    //float a = src.a + c.a - src.a * c.a;\r",
          "    //return src;\r",
          "    float a=  src.a + c.a * (1 - src.a);\r",
          "    //return float4(0, a,0,1);\r",
          "    //float3 rgb= (1.0 - c.a) * src.rgb + c.a * c.rgb;       \r",
          "    float3 rgb =  (c.rgb * c.a + src.rgb * src.a * (1- c.a) ) / a;\r",
          "    //rgb.rgb = lerp(rgb.rgb, debug.rgb, debug.a);\r",
          "\r",
          "    return float4(rgb, a);\r",
          "}\r",
          "//<<< PS\r",
          "\r",
          "//>>> _technique\r",
          "technique10 Render",
          "{",
          "    pass P0",
          "    {",
          "        SetGeometryShader( 0 );",
          "        SetVertexShader( CompileShader( vs_4_0, VS() ) );",
          "        SetPixelShader( CompileShader( ps_4_0, PS() ) );",
          "    }",
          "}",
          "//<<< _technique\r",
          ""
        ]
      },
      "MetaID": "c522a66e-3260-4692-b3e3-79fd0361fa3d",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-100000",
      "Max": "100000",
      "Scale": "0.1",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "Image1",
      "MetaInstanceID": "fc8315a2-fa9b-4f41-98ab-0a5d388e99fd",
      "DefaultValue": {
        "Type": "Image",
        "Value": "Framefield.Core.Image"
      },
      "MetaID": "9848060d-fd84-45b0-b658-d0d531c61dab",
      "IsMultiInput": "False",
      "Relevance": "Relevant",
      "Description": "",
      "Min": "-100000",
      "Max": "100000",
      "Scale": "0.1",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "ColorA.R",
      "MetaInstanceID": "62f0aff2-b5ec-4942-bc62-3e9422b9f28d",
      "DefaultValue": {
        "Type": "Float",
        "Value": "0.4206097"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "0",
      "Max": "1",
      "Scale": "0.01",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "ColorA.G",
      "MetaInstanceID": "bf2a6535-2389-47a9-8e63-e5984e34db8f",
      "DefaultValue": {
        "Type": "Float",
        "Value": "0.6546189"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "0",
      "Max": "1",
      "Scale": "0.01",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "ColorA.B",
      "MetaInstanceID": "e9b023bf-4760-4d49-adaa-bef414155c5d",
      "DefaultValue": {
        "Type": "Float",
        "Value": "1"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "0",
      "Max": "1",
      "Scale": "0.01",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "ColorA.A",
      "MetaInstanceID": "e5c20852-dd85-4d11-8f78-081d41269b6c",
      "DefaultValue": {
        "Type": "Float",
        "Value": "0.6"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "0",
      "Max": "1",
      "Scale": "0.01",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "PositionA.X",
      "MetaInstanceID": "710c0192-c7f9-429e-b4ec-27b9dba9e4c4",
      "DefaultValue": {
        "Type": "Float",
        "Value": "1"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-10000",
      "Max": "10000",
      "Scale": "0.01",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "PositionA.Y",
      "MetaInstanceID": "a3939908-6502-41e2-a766-152bba1ca3ac",
      "DefaultValue": {
        "Type": "Float",
        "Value": "1"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-10000",
      "Max": "10000",
      "Scale": "0.01",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "ColorB.R",
      "MetaInstanceID": "fb1e078d-1718-4150-add1-f23711888234",
      "DefaultValue": {
        "Type": "Float",
        "Value": "0.4131513"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "0",
      "Max": "1",
      "Scale": "0.01",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "ColorB.G",
      "MetaInstanceID": "6596bcca-beda-48b7-a5ff-dd75558ca41a",
      "DefaultValue": {
        "Type": "Float",
        "Value": "1"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "0",
      "Max": "1",
      "Scale": "0.01",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "ColorB.B",
      "MetaInstanceID": "6f16a087-4023-4990-8fff-5637ddb38549",
      "DefaultValue": {
        "Type": "Float",
        "Value": "0.4597956"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "0",
      "Max": "1",
      "Scale": "0.01",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "ColorB.A",
      "MetaInstanceID": "bec9b3ed-ef77-4f5d-812c-ddad5cacb36b",
      "DefaultValue": {
        "Type": "Float",
        "Value": "0.6"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "0",
      "Max": "1",
      "Scale": "0.01",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "PositionB.X",
      "MetaInstanceID": "b7d9c00e-d8bd-4307-ba75-9c3040328a97",
      "DefaultValue": {
        "Type": "Float",
        "Value": "1"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-10000",
      "Max": "10000",
      "Scale": "0.01",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "PositionB.Y",
      "MetaInstanceID": "34069150-8439-4cab-a842-d93212f89c04",
      "DefaultValue": {
        "Type": "Float",
        "Value": "-1"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-10000",
      "Max": "10000",
      "Scale": "0.01",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "ColorC.R",
      "MetaInstanceID": "c48a1aa9-6243-4b40-af56-0ddd3509990d",
      "DefaultValue": {
        "Type": "Float",
        "Value": "1"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "0",
      "Max": "1",
      "Scale": "0.01",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "ColorC.G",
      "MetaInstanceID": "e1602ca1-1abb-4d0a-8250-8219e9c66c02",
      "DefaultValue": {
        "Type": "Float",
        "Value": "0.5865586"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "0",
      "Max": "1",
      "Scale": "0.01",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "ColorC.B",
      "MetaInstanceID": "6b636bbd-0d35-4674-a3ed-04c7d963a487",
      "DefaultValue": {
        "Type": "Float",
        "Value": "1"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "0",
      "Max": "1",
      "Scale": "0.01",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "ColorC.A",
      "MetaInstanceID": "61273094-0499-4f0d-8bdb-197e91a0e1af",
      "DefaultValue": {
        "Type": "Float",
        "Value": "0.6"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "0",
      "Max": "1",
      "Scale": "0.01",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "PositionC.X",
      "MetaInstanceID": "aca901c1-206b-46aa-a057-5b63315914bb",
      "DefaultValue": {
        "Type": "Float",
        "Value": "-1"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-10000",
      "Max": "10000",
      "Scale": "0.01",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "PositionC.Y",
      "MetaInstanceID": "2c4f25e4-8c55-4f1f-8fb9-51614cf0895a",
      "DefaultValue": {
        "Type": "Float",
        "Value": "-1"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-10000",
      "Max": "10000",
      "Scale": "0.01",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "ColorD.R",
      "MetaInstanceID": "ba8522cb-c532-4fd3-8e7d-7ff953fd844b",
      "DefaultValue": {
        "Type": "Float",
        "Value": "1"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "0",
      "Max": "1",
      "Scale": "0.01",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "ColorD.G",
      "MetaInstanceID": "d5ed678e-bd43-43da-81d7-4c7294067e74",
      "DefaultValue": {
        "Type": "Float",
        "Value": "0.7036265"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "0",
      "Max": "1",
      "Scale": "0.01",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "ColorD.B",
      "MetaInstanceID": "e4e81339-860d-4e0d-83c5-159ee27a3fe2",
      "DefaultValue": {
        "Type": "Float",
        "Value": "0.345776"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "0",
      "Max": "1",
      "Scale": "0.01",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "ColorD.A",
      "MetaInstanceID": "008d777b-20a1-49f5-bc4b-b8a181a49471",
      "DefaultValue": {
        "Type": "Float",
        "Value": "0.6"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "0",
      "Max": "1",
      "Scale": "0.01",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "PositionD.X",
      "MetaInstanceID": "986d422b-2e88-461b-8b9f-eaa26c5a2b46",
      "DefaultValue": {
        "Type": "Float",
        "Value": "0"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-10000",
      "Max": "10000",
      "Scale": "0.01",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "PositionD.Y",
      "MetaInstanceID": "7fa6a5a0-5993-4215-a880-72ac1ab4908d",
      "DefaultValue": {
        "Type": "Float",
        "Value": "0"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-10000",
      "Max": "10000",
      "Scale": "0.01",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "Radius",
      "MetaInstanceID": "e2af4f9e-c17d-4463-9026-7e24743def35",
      "DefaultValue": {
        "Type": "Float",
        "Value": "2"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-100000",
      "Max": "100000",
      "Scale": "0.01",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "Bleed",
      "MetaInstanceID": "a419b19c-e665-4df9-8e59-b32dd0e91b77",
      "DefaultValue": {
        "Type": "Float",
        "Value": "0.2"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-100000",
      "Max": "100000",
      "Scale": "0.01",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "Randomize",
      "MetaInstanceID": "fb6e5f8e-a30e-49a4-ad06-f427bbb0f380",
      "DefaultValue": {
        "Type": "Float",
        "Value": "8"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "0",
      "Max": "100000",
      "Scale": "0.1",
      "ScaleType": "Linear",
      "EnumValues": []
    },
    {
      "Name": "Seed",
      "MetaInstanceID": "9a4d837a-fae4-4ba3-bd47-eedf940db1a5",
      "DefaultValue": {
        "Type": "Float",
        "Value": "118.7"
      },
      "MetaID": "3f76dee3-3897-44ac-82d6-25ce9f53a506",
      "IsMultiInput": "False",
      "Relevance": "Optional",
      "Description": "",
      "Min": "-100000",
      "Max": "100000",
      "Scale": "0.1",
      "ScaleType": "Linear",
      "EnumValues": []
    }
  ],
  "Outputs": [
    {
      "Name": "Image",
      "MetaInstanceID": "171d58a3-b07c-40f3-a59c-97250415a064",
      "MetaID": "9848060d-fd84-45b0-b658-d0d531c61dab"
    }
  ],
  "OperatorParts": [
    {
      "MetaInstanceID": "e4e0112d-b0dc-4845-98e8-207b1fb28689",
      "MetaID": "ea4cd0a7-869f-45c0-ac78-1e254ebd4c1a",
      "Name": "AddColorOverlayFunc",
      "Version": "c8a9267c-3451-4c40-bbc7-675e1743d0a9",
      "Type": "Float",
      "IsMultiInput": "True",
      "Script": [
        "//>>> _using",
        "using System;",
        "using System.Collections.Generic;",
        "using System.Linq;",
        "using System.Text;",
        "using SharpDX;",
        "using SharpDX.Direct3D11;",
        "using SharpDX.Windows;",
        "//<<< _using",
        "",
        "namespace Framefield.Core.IDea4cd0a7_869f_45c0_ac78_1e254ebd4c1a",
        "{",
        "    public class Class_AddColorOverlay : FXImageFunction",
        "    {",
        "        //>>> _inputids",
        "        private enum InputId",
        "        {",
        "            Code = 0,",
        "            Image1 = 1,",
        "            ColorAR = 2,",
        "            ColorAG = 3,",
        "            ColorAB = 4,",
        "            ColorAA = 5,",
        "            PositionAX = 6,",
        "            PositionAY = 7,",
        "            ColorBR = 8,",
        "            ColorBG = 9,",
        "            ColorBB = 10,",
        "            ColorBA = 11,",
        "            PositionBX = 12,",
        "            PositionBY = 13,",
        "            ColorCR = 14,",
        "            ColorCG = 15,",
        "            ColorCB = 16,",
        "            ColorCA = 17,",
        "            PositionCX = 18,",
        "            PositionCY = 19,",
        "            ColorDR = 20,",
        "            ColorDG = 21,",
        "            ColorDB = 22,",
        "            ColorDA = 23,",
        "            PositionDX = 24,",
        "            PositionDY = 25,",
        "            Radius = 26,",
        "            Bleed = 27,",
        "            Randomize = 28,",
        "            Seed = 29",
        "        }",
        "        //<<< _inputids",
        "",
        "        public override OperatorPartContext Eval(OperatorPartContext context, List<OperatorPart> inputs, int outputIdx) {",
        "            //>>> _params",
        "            var Code = inputs[(int)InputId.Code].Eval(context).Text;",
        "            var Image1 = inputs[(int)InputId.Image1].Eval(context).Image; if (Image1 == null) return context;",
        "            var ColorAR = inputs[(int)InputId.ColorAR].Eval(context).Value;",
        "            var ColorAG = inputs[(int)InputId.ColorAG].Eval(context).Value;",
        "            var ColorAB = inputs[(int)InputId.ColorAB].Eval(context).Value;",
        "            var ColorAA = inputs[(int)InputId.ColorAA].Eval(context).Value;",
        "            var ColorA = new Color4(ColorAR, ColorAG, ColorAB, ColorAA);",
        "            var PositionAX = inputs[(int)InputId.PositionAX].Eval(context).Value;",
        "            var PositionAY = inputs[(int)InputId.PositionAY].Eval(context).Value;",
        "            var PositionA = new Vector2(PositionAX, PositionAY);",
        "            var ColorBR = inputs[(int)InputId.ColorBR].Eval(context).Value;",
        "            var ColorBG = inputs[(int)InputId.ColorBG].Eval(context).Value;",
        "            var ColorBB = inputs[(int)InputId.ColorBB].Eval(context).Value;",
        "            var ColorBA = inputs[(int)InputId.ColorBA].Eval(context).Value;",
        "            var ColorB = new Color4(ColorBR, ColorBG, ColorBB, ColorBA);",
        "            var PositionBX = inputs[(int)InputId.PositionBX].Eval(context).Value;",
        "            var PositionBY = inputs[(int)InputId.PositionBY].Eval(context).Value;",
        "            var PositionB = new Vector2(PositionBX, PositionBY);",
        "            var ColorCR = inputs[(int)InputId.ColorCR].Eval(context).Value;",
        "            var ColorCG = inputs[(int)InputId.ColorCG].Eval(context).Value;",
        "            var ColorCB = inputs[(int)InputId.ColorCB].Eval(context).Value;",
        "            var ColorCA = inputs[(int)InputId.ColorCA].Eval(context).Value;",
        "            var ColorC = new Color4(ColorCR, ColorCG, ColorCB, ColorCA);",
        "            var PositionCX = inputs[(int)InputId.PositionCX].Eval(context).Value;",
        "            var PositionCY = inputs[(int)InputId.PositionCY].Eval(context).Value;",
        "            var PositionC = new Vector2(PositionCX, PositionCY);",
        "            var ColorDR = inputs[(int)InputId.ColorDR].Eval(context).Value;",
        "            var ColorDG = inputs[(int)InputId.ColorDG].Eval(context).Value;",
        "            var ColorDB = inputs[(int)InputId.ColorDB].Eval(context).Value;",
        "            var ColorDA = inputs[(int)InputId.ColorDA].Eval(context).Value;",
        "            var ColorD = new Color4(ColorDR, ColorDG, ColorDB, ColorDA);",
        "            var PositionDX = inputs[(int)InputId.PositionDX].Eval(context).Value;",
        "            var PositionDY = inputs[(int)InputId.PositionDY].Eval(context).Value;",
        "            var PositionD = new Vector2(PositionDX, PositionDY);",
        "            var Radius = inputs[(int)InputId.Radius].Eval(context).Value;",
        "            var Bleed = inputs[(int)InputId.Bleed].Eval(context).Value;",
        "            var Randomize = inputs[(int)InputId.Randomize].Eval(context).Value;",
        "            var Seed = inputs[(int)InputId.Seed].Eval(context).Value;",
        "            //<<< _params",
        "               ",
        "            return PrepareAndEvalOnChange(context, () => {",
        "                ClearRenderTarget(context, new SharpDX.Color4(0, 0, 0, 0.0f));",
        "",
        "                if( Randomize > 0) {",
        "                    var rand = new Random( (int)Seed+700);",
        "                    PositionAX += (float)(rand.NextDouble()-0.5f) * Randomize;",
        "                    PositionAY += (float)(rand.NextDouble()-0.5f) * Randomize;",
        "                    PositionBX += (float)(rand.NextDouble()-0.5f) * Randomize;",
        "                    PositionBY += (float)(rand.NextDouble()-0.5f) * Randomize;",
        "                    PositionCX += (float)(rand.NextDouble()-0.5f) * Randomize;",
        "                    PositionCY += (float)(rand.NextDouble()-0.5f) * Randomize;",
        "                    PositionDX += (float)(rand.NextDouble()-0.5f) * Randomize;",
        "                    PositionDY += (float)(rand.NextDouble()-0.5f) * Randomize;",
        "                    ",
        "                }",
        "",
        "                //>>> _setup",
        "                using (var Image1View = new ShaderResourceView(context.D3DDevice, Image1))",
        "                {",
        "                    _effect.GetVariableByName(\"RenderTargetSize\").AsVector().Set(new Vector2(_usedViewport.Width, _usedViewport.Height));",
        "                    _effect.GetVariableByName(\"Image1\").AsShaderResource().SetResource(Image1View);",
        "                    _effect.GetVariableByName(\"ColorA\").AsVector().Set(new Vector4(ColorAR, ColorAG, ColorAB, ColorAA));",
        "                    _effect.GetVariableByName(\"PositionA\").AsVector().Set(new Vector2(PositionAX, PositionAY));",
        "                    _effect.GetVariableByName(\"ColorB\").AsVector().Set(new Vector4(ColorBR, ColorBG, ColorBB, ColorBA));",
        "                    _effect.GetVariableByName(\"PositionB\").AsVector().Set(new Vector2(PositionBX, PositionBY));",
        "                    _effect.GetVariableByName(\"ColorC\").AsVector().Set(new Vector4(ColorCR, ColorCG, ColorCB, ColorCA));",
        "                    _effect.GetVariableByName(\"PositionC\").AsVector().Set(new Vector2(PositionCX, PositionCY));",
        "                    _effect.GetVariableByName(\"ColorD\").AsVector().Set(new Vector4(ColorDR, ColorDG, ColorDB, ColorDA));",
        "                    _effect.GetVariableByName(\"PositionD\").AsVector().Set(new Vector2(PositionDX, PositionDY));",
        "                    _effect.GetVariableByName(\"Radius\").AsScalar().Set(Radius);",
        "                    _effect.GetVariableByName(\"Bleed\").AsScalar().Set(Bleed);",
        "                    _effect.GetVariableByName(\"Randomize\").AsScalar().Set(Randomize);",
        "                    _effect.GetVariableByName(\"Seed\").AsScalar().Set(Seed);",
        "                //<<< _setup",
        "                ",
        "",
        "                Render(context);",
        "",
        "                //>>> _cleanup",
        "                }",
        "                //<<< _cleanup",
        "            });",
        "        }",
        "",
        "    }",
        "}",
        "",
        "",
        "",
        ""
      ],
      "AdditionalAssemblies": []
    }
  ],
  "Operators": [],
  "Connections": [
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "e4e0112d-b0dc-4845-98e8-207b1fb28689",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "171d58a3-b07c-40f3-a59c-97250415a064"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "7030cc51-c58d-48c8-9ecc-61229eb793e9",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "e4e0112d-b0dc-4845-98e8-207b1fb28689"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "fc8315a2-fa9b-4f41-98ab-0a5d388e99fd",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "e4e0112d-b0dc-4845-98e8-207b1fb28689"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "62f0aff2-b5ec-4942-bc62-3e9422b9f28d",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "e4e0112d-b0dc-4845-98e8-207b1fb28689"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "bf2a6535-2389-47a9-8e63-e5984e34db8f",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "e4e0112d-b0dc-4845-98e8-207b1fb28689"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "e9b023bf-4760-4d49-adaa-bef414155c5d",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "e4e0112d-b0dc-4845-98e8-207b1fb28689"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "e5c20852-dd85-4d11-8f78-081d41269b6c",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "e4e0112d-b0dc-4845-98e8-207b1fb28689"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "710c0192-c7f9-429e-b4ec-27b9dba9e4c4",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "e4e0112d-b0dc-4845-98e8-207b1fb28689"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "a3939908-6502-41e2-a766-152bba1ca3ac",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "e4e0112d-b0dc-4845-98e8-207b1fb28689"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "fb1e078d-1718-4150-add1-f23711888234",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "e4e0112d-b0dc-4845-98e8-207b1fb28689"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "6596bcca-beda-48b7-a5ff-dd75558ca41a",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "e4e0112d-b0dc-4845-98e8-207b1fb28689"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "6f16a087-4023-4990-8fff-5637ddb38549",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "e4e0112d-b0dc-4845-98e8-207b1fb28689"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "bec9b3ed-ef77-4f5d-812c-ddad5cacb36b",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "e4e0112d-b0dc-4845-98e8-207b1fb28689"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "b7d9c00e-d8bd-4307-ba75-9c3040328a97",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "e4e0112d-b0dc-4845-98e8-207b1fb28689"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "34069150-8439-4cab-a842-d93212f89c04",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "e4e0112d-b0dc-4845-98e8-207b1fb28689"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "c48a1aa9-6243-4b40-af56-0ddd3509990d",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "e4e0112d-b0dc-4845-98e8-207b1fb28689"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "e1602ca1-1abb-4d0a-8250-8219e9c66c02",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "e4e0112d-b0dc-4845-98e8-207b1fb28689"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "6b636bbd-0d35-4674-a3ed-04c7d963a487",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "e4e0112d-b0dc-4845-98e8-207b1fb28689"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "61273094-0499-4f0d-8bdb-197e91a0e1af",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "e4e0112d-b0dc-4845-98e8-207b1fb28689"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "aca901c1-206b-46aa-a057-5b63315914bb",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "e4e0112d-b0dc-4845-98e8-207b1fb28689"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "2c4f25e4-8c55-4f1f-8fb9-51614cf0895a",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "e4e0112d-b0dc-4845-98e8-207b1fb28689"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "ba8522cb-c532-4fd3-8e7d-7ff953fd844b",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "e4e0112d-b0dc-4845-98e8-207b1fb28689"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "d5ed678e-bd43-43da-81d7-4c7294067e74",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "e4e0112d-b0dc-4845-98e8-207b1fb28689"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "e4e81339-860d-4e0d-83c5-159ee27a3fe2",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "e4e0112d-b0dc-4845-98e8-207b1fb28689"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "008d777b-20a1-49f5-bc4b-b8a181a49471",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "e4e0112d-b0dc-4845-98e8-207b1fb28689"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "986d422b-2e88-461b-8b9f-eaa26c5a2b46",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "e4e0112d-b0dc-4845-98e8-207b1fb28689"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "7fa6a5a0-5993-4215-a880-72ac1ab4908d",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "e4e0112d-b0dc-4845-98e8-207b1fb28689"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "e2af4f9e-c17d-4463-9026-7e24743def35",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "e4e0112d-b0dc-4845-98e8-207b1fb28689"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "a419b19c-e665-4df9-8e59-b32dd0e91b77",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "e4e0112d-b0dc-4845-98e8-207b1fb28689"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "fb6e5f8e-a30e-49a4-ad06-f427bbb0f380",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "e4e0112d-b0dc-4845-98e8-207b1fb28689"
    },
    {
      "SourceOp": "00000000-0000-0000-0000-000000000000",
      "SourceOpPart": "9a4d837a-fae4-4ba3-bd47-eedf940db1a5",
      "TargetOp": "00000000-0000-0000-0000-000000000000",
      "TargetOpPart": "e4e0112d-b0dc-4845-98e8-207b1fb28689"
    }
  ]
}